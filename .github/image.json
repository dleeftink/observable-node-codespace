{
  "name": "Observable Framework Node image",
  "image": "mcr.microsoft.com/devcontainers/javascript-node:1-20-bullseye",
  "forwardPorts": [
    3000
  ],
  "portsAttributes": {
    "3000": {
      "label": "Live preview",
      "onAutoForward": "openPreview"
    }
  },
  "onCreateCommand": "echo 'Please wait for live pane ...' | sudo tee /usr/local/etc/vscode-dev-containers/first-run-notice.txt",
  "updateContentCommand": "if [ ! -d \"/workspaces/codespaces-blank/basic-template\" ]; then \n mv .devcontainer .. && git clone https://github.com/dleeftink/observable-node-codespace.git . && rm -rf .devcontainer && git clean -f -f &&  mv ../.devcontainer . && exit  0 \nfi",
  "waitFor": "updateContentCommand",
  "postCreateCommand": "npm install",
  "postAttachCommand": {
    "server": "code -r -g basic-template/docs/index.md:1 && npm run obs"
  },
  "customizations": {
    "codespaces": {
      "openFiles": [
        "basic-template/docs/index.md"
      ]
    }
  }
}
